<!doctype html>
<html>
	<head>
		<title>Line Chart</title>
		<script src="Chart.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	</head>
	<body>
		<div>
			<div>
				<canvas id="canvas" height="450" width="600"></canvas>
			</div>
		</div>

	<span id="q"></span>
	<br>
	<span id="q1"></span>
	<script>
	
		//var obj = parseJSON();
		//obj.temperature[1].temp
		
		//var jsonString = '{"temperature":[{"temp":"70", "date":"2014-11-11 12:45:34"},{"temp":"80", "date":"2014-11-11 12:45:44"},{"temp":"90", "date":"2014-11-11 12:45:54"},{"temp":"95", "date":"2014-11-11 12:46:04"}]}';
		
		//var jsonString = "";
		
		/*
		var obj = $.getJSON('get.php', function(data) {
			obj = data;
		});*/
		//$("#q1").load("get.php");
		//$("#q").load("get.php");
		
		//var str = '{"temp":[{"value":"99","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"30","date":"2014-11-11"},{"value":"88","date":"2014-11-11"},{"value":"88","date":"2014-11-11"},{"value":"123","date":"2014-11-11"},{"value":"100","date":"2015-11-25"},{"value":"100","date":"2015-11-25"},{"value":"60","date":"2015-11-28"},{"value":"61","date":"2015-11-28"},{"value":"60","date":"2015-11-28"},{"value":"61","date":"2015-11-28"},{"value":"62","date":"2015-11-28"}]}';
		
		//$("#q").html(str);
		/*
		var jsonString = $.ajax({
			url:'/temp/get.php',
			/*type:'GET',
			data: data,
			dataType: 'json'
		});
		
		
		//var obj = jsonString;
		
		
		//jsonString = '{"temperature":'+data+'}';
		//alert(jsonString);*/
		var jsonstr;
		var obj;
		
		jQuery.get("get.php", function(obj){
			
		//alert(JSON.stringify(obj));
		
		//var htmlstring = $("#q1").html();
		//obj = JSON.parse(jsonstr);
	
		//var randomScalingFactor = function(){ return Math.round(Math.random()*100)};
		
		//alert(obj.temp.length);
		var len = obj.temp.length;
		
		var lineChartData = {
			labels : [obj.temp[len-8].date,obj.temp[len-7].date,obj.temp[len-6].date,obj.temp[len-5].date,obj.temp[len-4].date,obj.temp[len-3].date,obj.temp[len-2].date,obj.temp[len-1].date],
			datasets : [
				{
					label: "My First dataset",
					fillColor : "rgba(220,220,220,0.2)",
					strokeColor : "rgba(220,220,220,1)",
					pointColor : "rgba(220,220,220,1)",
					pointStrokeColor : "#fff",
					pointHighlightFill : "#fff",
					pointHighlightStroke : "rgba(220,220,220,1)",
					data : [obj.temp[len-8].value,obj.temp[len-7].value,obj.temp[len-6].value,obj.temp[len-5].value,obj.temp[len-4].value,obj.temp[len-3].value,obj.temp[len-2].value,obj.temp[len-1].value]
				}
			]
		}
	
	var ctx = document.getElementById("canvas").getContext("2d");
	
		window.myLine = new Chart(ctx).Line(lineChartData, {
			responsive: true
		});
	
	});

	</script>
	</body>
</html>